{
  "version": "1.0",
  "name": "Iteration Example: Projects and Their Tasks",
  "description": "Demonstrates iteration functionality - get projects, then iterate through each project to get its tasks",
  "sequence": [
    {
      "method": "GET",
      "path": "/projects",
      "summary": "Get multiple projects",
      "description": "Returns the compact project records for some filtered set of projects.",
      "tags": ["Projects"],
      "parameters": {
        "path": {},
        "query": {
          "limit": "5",
          "workspace": "1234567890123456",
          "opt_fields": "gid,name,completed,notes"
        },
        "body": null
      },
      "variableMappings": {}
    },
    {
      "method": "GET", 
      "path": "/tasks",
      "summary": "Get tasks for each project (with iteration)",
      "description": "This step iterates through each project from step 1 and gets its tasks",
      "tags": ["Tasks"],
      "parameters": {
        "path": {},
        "query": {
          "project": "{{item.gid}}",
          "opt_fields": "gid,name,completed,assignee.name,due_date",
          "limit": "20"
        },
        "body": null
      },
      "variableMappings": {},
      "iteration": {
        "enabled": true,
        "sourceField": "step0.data",
        "iterationVariable": "item",
        "unifyResults": true
      }
    }
  ],
  "dataTransformations": {
    "fieldMappings": [
      {
        "sourceField": "gid",
        "targetField": "task_id",
        "isUnified": false
      },
      {
        "sourceField": "name",
        "targetField": "task_name", 
        "isUnified": false
      },
      {
        "sourceField": "completed",
        "targetField": "is_completed",
        "isUnified": false
      },
      {
        "sourceField": "assignee.name",
        "targetField": "assignee_name",
        "isUnified": false
      }
    ],
    "unifiedColumns": [
      {
        "name": "task_info",
        "formatTemplate": "{name} - {completed ? 'Done' : 'Pending'}",
        "sourceFields": ["name", "completed"]
      },
      {
        "name": "task_assignment",
        "formatTemplate": "Task: {name} | Assigned to: {assignee.name || 'Unassigned'}",
        "sourceFields": ["name", "assignee.name"]
      }
    ]
  },
  "timestamp": "2025-11-12T00:00:00.000Z",
  "baseUrl": "https://app.asana.com/api/1.0"
}